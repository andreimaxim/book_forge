<div class="mb-4 flex flex-wrap gap-4 items-center">
  <span class="text-sm text-gray-500">Filter by:</span>

  <div class="flex gap-2 flex-wrap">
    <% Author::STATUSES.each do |status| %>
      <%= link_to status.humanize,
        authors_path(status: status, genre: params[:genre], search: params[:search]),
        class: "px-3 py-1 rounded-full text-sm #{params[:status] == status ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}",
        data: { testid: "filter-status-#{status}", turbo_frame: "authors_list" } %>
    <% end %>

    <% if params[:status].present? %>
      <%= link_to "Clear",
        authors_path(genre: params[:genre], search: params[:search]),
        class: "px-3 py-1 rounded-full text-sm bg-red-100 text-red-700 hover:bg-red-200",
        data: { turbo_frame: "authors_list" } %>
    <% end %>
  </div>

  <% genres = Author.distinct.pluck(:genre_focus).compact.sort %>
  <% if genres.any? %>
    <span class="text-gray-300">|</span>
    <div class="flex gap-2">
      <% genres.each do |genre| %>
        <%= link_to genre,
          authors_path(genre: genre, status: params[:status], search: params[:search]),
          class: "px-3 py-1 rounded-full text-sm #{params[:genre] == genre ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}",
          data: { testid: "filter-genre-#{genre.parameterize}", turbo_frame: "authors_list" } %>
      <% end %>

      <% if params[:genre].present? %>
        <%= link_to "Clear",
          authors_path(status: params[:status], search: params[:search]),
          class: "px-3 py-1 rounded-full text-sm bg-red-100 text-red-700 hover:bg-red-200",
          data: { turbo_frame: "authors_list" } %>
      <% end %>
    </div>
  <% end %>
</div>
