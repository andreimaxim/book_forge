<% cache agent do %>
<tr data-testid="agent-row" id="<%= dom_id(agent) %>">
  <td class="px-6 py-4 whitespace-nowrap overflow-hidden">
    <div class="flex items-center">
      <div class="flex-shrink-0 h-10 w-10">
        <div class="h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center">
          <span class="text-sm font-medium text-indigo-700"><%= agent.first_name[0] %><%= agent.last_name[0] %></span>
        </div>
      </div>
      <div class="ml-4 min-w-0">
        <div class="text-sm font-medium text-gray-900 truncate">
          <%= link_to agent.full_name, agent, class: "hover:text-blue-600" %>
        </div>
        <div class="text-sm text-gray-500 truncate w-full"><%= agent.email || "-" %></div>
      </div>
    </div>
  </td>
  <td class="px-6 py-4 whitespace-nowrap">
    <div class="text-sm text-gray-900"><%= agent.agency_name || "-" %></div>
  </td>
  <td class="px-6 py-4">
    <div class="text-sm text-gray-500 max-w-xs truncate"><%= agent.genres_represented || "-" %></div>
  </td>
  <td class="px-6 py-4 whitespace-nowrap">
    <div class="text-sm text-gray-900"><%= agent.commission_rate ? "#{agent.commission_rate}%" : "-" %></div>
  </td>
  <td class="px-6 py-4 whitespace-nowrap">
    <%= badge agent.status.humanize, status: agent.status.to_sym %>
  </td>
  <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
    <%= link_to "Edit", edit_agent_path(agent), class: "text-blue-600 hover:text-blue-900 mr-3" %>
    <%= link_to "Delete", agent_path(agent), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete #{agent.full_name}?" }, class: "text-red-600 hover:text-red-900" %>
  </td>
</tr>
<% end %>
